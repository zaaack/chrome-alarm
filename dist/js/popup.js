!function(e){function t(t){for(var n,o,c=t[0],i=t[1],s=t[2],m=0,f=[];m<c.length;m++)o=c[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(u&&u(t);f.length;)f.shift()();return l.push.apply(l,s||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,c=1;c<a.length;c++){var i=a[c];0!==r[i]&&(n=!1)}n&&(l.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={3:0},l=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=i;l.push([47,0]),a()}({2:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return i}));var n,r=function(){function e(){}return e.prototype.get=function(e,t){var a=localStorage.getItem(e);return a?JSON.parse(a):null!=t?t:null},e.prototype.set=function(e,t){localStorage.setItem(e,JSON.stringify(t))},e.prototype.delete=function(e){localStorage.removeItem(e)},e}(),l=function(){function e(e,t,a){this._kv=e,this._key=t,this._defaults=a}return e.prototype.get=function(e){return void 0===e&&(e=this._defaults),this._kv.get(this._key,e)},e.prototype.set=function(e){return this._kv.set(this._key,e)},e.prototype.delete=function(){return this._kv.delete(this._key)},e}();!function(e){e.once="once",e.repeat="repeat"}(n||(n={}));var o,c={M1:6e4,H1:36e5};!function(e){e.empty=function(){return{ahead:0,type:n.repeat,duration:c.H1,timeout:Date.now()+c.H1,title:"New Alarm",id:Math.random().toString(36).slice(2)}}}(o||(o={}));var i=new(function(){function e(){this._kv=new r,this.alarms=new l(this._kv,"alarms")}return e.prototype.getAll=function(){return this.alarms.get([])},e.prototype.get=function(e){return console.log("id",e,this.getAll()),this.getAll().find((function(t){return t.id===e}))},e.prototype.setAll=function(e){this.alarms.set(e)},e.prototype.remove=function(e){var t=this.getAll().filter((function(t){return t.id!==e.id}));this.setAll(t)},e.prototype.save=function(e){var t=this.getAll(),a=t.findIndex((function(t){return t.id===e.id}));a<0&&(a=t.length),t[a],this.setAll(t)},e}())},20:function(e,t,a){var n=a(10),r=a(35);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var l={insert:"head",singleton:!1},o=(n(r,l),r.locals?r.locals:{});e.exports=o},35:function(e,t,a){(t=a(11)(!1)).push([e.i,".form{padding:15px}a.panel-block:hover,label.panel-block:hover{background:unset}a.panel-block,label.panel-block{cursor:default}.fade-enter{transform:translateX(100%)}.fade-enter.fade-enter-active{transform:translateX(0);transition:transform 300ms ease-in}\n",""]),e.exports=t},43:function(e,t,a){var n=a(10),r=a(44);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var l={insert:"head",singleton:!1},o=(n(r,l),r.locals?r.locals:{});e.exports=o},44:function(e,t,a){(t=a(11)(!1)).push([e.i,".panel{min-height:300px;max-height:500px;overflow:auto}.panel-heading{display:flex;justify-content:space-between;align-items:center}.panel-block{align-items:baseline}.panel-block .ca-title{flex:1}.panel-block .ca-title .ca-subtitle{font-size:13px;color:#aaa}.panel-block .remove-btn,.panel-block .config-btn{display:none;cursor:pointer;margin:0 5px}.panel-block:hover .config-btn,.panel-block:hover .remove-btn{display:block}.panel-block:hover .remove-btn{color:#f14668}\n",""]),e.exports=t},47:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),o=a(12),c=(a(31),a(33),a(20)),i=a.n(c),s=a(21),u=a.n(s),m=a(51),f=a(3),d=a(2),p=a(6),h=a(22),v=Object(p.a)();function b(){return chrome.extension.getBackgroundPage().alarmManager}var g=(n=Object(h.a)((function(){var e=Object(r.useState)(b().alarms),t=e[0],a=e[1];function n(){a(b().alarms)}return{alarms:t,fetch:n,remove:function(e){b().remove(e),n()},save:function(e){b().save(e),n()}}})))[0],y=n[1],E=a(23),N=a.n(E),k=(a(36),r.forwardRef((function(e,t){e.control;var a=e.displayMode,n=(e.error,e.help,e.maxLength),l=e.name,o=e.onChange,c=e.required,i=e.showHeader,s=void 0!==i&&i,u=e.type,m=void 0===u?"datetime":u,d=e.value,p=e.id,h=void 0===p?l:p,v=e.bulmaCalendarOptions,b=Object(f.b)(e,["control","displayMode","error","help","maxLength","name","onChange","required","showHeader","type","value","id","bulmaCalendarOptions"]),g=r.useRef(),y=r.useRef();return r.useImperativeHandle(t,(function(){return g.current})),r.useEffect((function(){y.current=new N.a(g.current,Object(f.a)({showHeader:s,type:m,displayMode:a,validateLabel:"确定",cancelLabel:"取消",clearLabel:"清除",todayLabel:"今天",nowLabel:"现在",minuteSteps:1},v))}),[a,s,m]),r.useEffect((function(){return y.current.on("select",(function(){o({target:g.current},"time"===m?y.current.time.start:y.current.date.start),window["c_"+m]=y.current})),function(){y.current.removeListeners("select")}}),[o]),r.createElement("input",Object(f.a)({},b,{ref:g,defaultValue:d,id:h,maxLength:n,name:l,required:c}))})));function O(){var e=Object(m.d)(),t=y(),a=t.alarms,n=t.fetch,o=t.save,c=(t.remove,new URLSearchParams(e.location.search.slice(1)).get("id"));console.log("locId",c,e.location.search);var i=Object(r.useState)(c&&a.find((function(e){return e.id===c}))||d.a.empty()),s=i[0],u=i[1];function p(e,t){var a;u(Object(f.a)(Object(f.a)({},s),((a={})[e]=t,a)))}return l.a.createElement("div",{className:"form"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"标题:"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"text",placeholder:s.title,onChange:function(e){return p("title",e.target.value)}}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"类型:"),l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:"select"},l.a.createElement("select",{defaultValue:s.type,onChange:function(e){p("type",e.target.value)}},l.a.createElement("option",{value:d.b.repeat},"循环"))))),l.a.createElement("div",{className:"field",hidden:s.type!==d.b.once},l.a.createElement("label",{className:"label"},"到期:"),l.a.createElement("div",{className:"control"},l.a.createElement(k,{className:"input",type:"datetime",value:new Date(s.timeout),bulmaCalendarOptions:{minDate:new Date,closeOnOverlayClick:!0},onChange:function(e,t){p("timeout",t.getTime())}}))),l.a.createElement("div",{className:"field",hidden:s.type!==d.b.repeat},l.a.createElement("label",{className:"label"},"循环:"),l.a.createElement("div",{className:"control"},l.a.createElement(k,{className:"input",type:"time",value:new Date(s.duration+16*d.c.H1),onChange:function(e,t){var a=new Date(0);a.setHours(t.getHours()+a.getHours()),a.setMinutes(t.getMinutes()+a.getMinutes()),p("duration",a.getTime())}}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"提前:"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{type:"number",min:0,max:1440,defaultValue:s.ahead,onChange:function(e){p("ahead",Number(e.target.value)||0)}}))),l.a.createElement("div",{className:"field is-grouped"},l.a.createElement("div",{className:"control"},l.a.createElement("button",{onClick:function(t){o(s),n(),e.goBack()},className:"button is-primary is-link"},"保存")),l.a.createElement("div",{className:"control"},l.a.createElement("button",{onClick:function(t){e.push("/")},className:"button is-link is-light"},"取消"))))}var w=a(15),j=a.n(w);a(43);function x(){var e=y(),t=e.alarms,a=e.fetch,n=e.remove,o=e.save,c=(Object(m.e)(),Object(m.d)());return Object(r.useEffect)((function(){a()}),[]),l.a.createElement("nav",{className:"panel"},l.a.createElement("p",{className:"panel-heading"},l.a.createElement("span",null,"整点报时"),l.a.createElement("button",{className:"button is-primary is-small",onClick:function(e){c.push("/form")}},l.a.createElement("i",{className:"fas fa-plus","aria-hidden":"true"}))),t.map((function(e){return l.a.createElement("a",{key:e.id,className:"panel-block"},l.a.createElement("span",{className:"panel-icon"},l.a.createElement("i",{className:"fas fa-"+("once"===e.type?"hourglass-half":"sync"),"aria-hidden":"true"})),l.a.createElement("span",{className:"ca-title"},e.title,l.a.createElement("div",{className:"ca-subtitle"},"once"===e.type?j()(e.timeout).format("YYYY/MM/DD HH:mm"):j()(e.duration).add(-8,"h").format("HH:mm"))),l.a.createElement("i",{className:"fas fa-times remove-btn","aria-hidden":"true",onClick:function(t){confirm("确定要删除「"+e.title+"」吗?")&&n(e)}}),l.a.createElement("i",{className:"fas fa-cog config-btn","aria-hidden":"true",onClick:function(t){c.push("/form?id="+e.id)}}),l.a.createElement("div",{className:"field"},l.a.createElement("input",{id:e.id,type:"checkbox",className:"switch",defaultChecked:!e.disabled,onChange:function(t){o(Object(f.a)(Object(f.a)({},e),{disabled:!t.target.checked}))}}),l.a.createElement("label",{htmlFor:e.id})))})))}var _=a(50),C=a(49);function M(){var e=Object(m.e)();return l.a.createElement(_.a,null,l.a.createElement(C.a,{key:e.key,classNames:"fade",timeout:300},l.a.createElement(m.c,null,l.a.createElement(m.a,{path:"/form"},l.a.createElement(O,null)),l.a.createElement(m.a,{path:"/"},l.a.createElement(x,null)))))}Object(o.render)(l.a.createElement((function(){return l.a.createElement(g,null,l.a.createElement("div",{className:u()(i.a.root,"container")},l.a.createElement(m.b,{history:v},l.a.createElement(M,null))))}),null),document.querySelector("#app"))}});